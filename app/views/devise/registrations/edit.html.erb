<div class="container padded-medium">
  <div class="row">
    <div class="col-sm-6 col-sm-offset-3">

      <div class="panel panel-default">
        <div class="panel-heading">
          <strong><%= t('users.edit.account') %></strong>
        </div>
        <div class="panel-body">
          <%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
            <%= f.error_notification %>

            <%= f.input :email %>

            <%- if devise_mapping.confirmable? && resource.pending_reconfirmation? -%>
              <p>
                <%= t('.currently_waiting_confirmation_for_email', email: resource.unconfirmed_email, default: "Currently waiting confirmation for: %{email}") %>
              </p>
            <%- end -%>

            <% if resource.provider != "facebook" %>
              <%= f.label :password %> <i>(<%= t('.leave_blank_if_you_don_t_want_to_change_it', default: "leave blank if you don't want to change it") %>)</i>
              <%= f.input :password, label: false, autocomplete: "off" %>

              <%#= f.input :password_confirmation %>
              <%= f.label :current_password %> <i>(<%= t('.we_need_your_current_password_to_confirm_your_changes', default: 'we need your current password to confirm your changes') %>)</i>
              <%= f.input :current_password, label: false %>
            <% end %>

            <%= f.button :submit, t('.update', default: "Update"), class: "btn btn-primary" %>
          <% end %>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <strong><%= t('users.edit.notifications.title') %></strong>
        </div>
        <div class="panel-body">

          <%= simple_form_for(resource.notification_setting, url: notification_setting_path(resource.notification_setting)) do |f| %>
            <%= f.error_notification %>

            <p><%= t('users.edit.notifications.email_me') %></p>
            <div class="padded-mini">
              <p><strong><%= t('users.edit.notifications.general') %></strong></p>

              <%= f.input :as_user_new_competition, label: t('users.edit.notifications.as_user_new_competition') %>
              <%= f.input :as_user_competition_edited, label: t('users.edit.notifications.as_user_competition_edited') %>
              <%#= f.input :as_user_new_subscription, label: t('users.edit.notifications.new_subscription') %>
              <%= f.input :as_user_subscription_status_changed, label: t('users.edit.notifications.as_user_subscription_status_changed') %>
            </div>

            <div class="padded-mini-bottom">
              <p><strong><%= t('users.edit.notifications.as_author') %></strong></p>

              <%= f.input :as_author_new_subscription, label: t('users.edit.notifications.as_author_new_subscription') %>
              <%= f.input :as_author_cancelation, label: t('users.edit.notifications.as_author_cancelation') %>
            </div>


            <%= f.input :locale, label: t('users.edit.notifications.locale'), collection: [['English', 'en'], ['FranÃ§ais', 'fr']], selected: resource.notification_setting.locale %>

            <%= f.button :submit, t('.update', default: "Update"), class: "btn btn-primary" %>
          <% end %>
        </div>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <strong><%= t('.cancel_my_account', default: 'Cancel my account') %></strong>
        </div>
        <div class="panel-body">
          <p><%= t('.unhappy', default: 'Unhappy') %>? <%= link_to t('.cancel_my_account', default: "Cancel my account"), registration_path(resource_name), data: { confirm: t('.are_you_sure', default: "Are you sure?") }, method: :delete %>.</p>
        </div>
      </div>
      <%#= link_to t('devise.shared.links.back', default: "Back"), :back %>
    </div>
  </div>
</div>
